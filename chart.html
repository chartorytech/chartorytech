<!DOCTYPE html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Chart · ChartoryTech</title><link rel="stylesheet" href="./styles/main.css">
<script src="./lib/lightweight-charts.standalone.production.js"></script></head>
<body>
<header class="header"><img src="./assets/logo.jpg" alt="ChartoryTech">
<div class="brand">실시간 차트 <small>REST + WebSocket + Indicators + Toolbar</small></div>
<span class="right"></span><a class="btn" href="./index.html">홈</a><a class="btn" href="#" id="logoutBtn">로그아웃</a></header>
<main class="wrap"><div class="card">
  <div class="controls">
    <label>마켓 <select id="market"><option value="futures" selected>Futures</option><option value="spot">Spot</option></select></label>
    <label>심볼 <input id="symbol" value="SOLUSDT" style="width:120px"></label>
    <label>인터벌 <select id="interval"><option>1m</option><option>5m</option><option>15m</option><option selected>1h</option><option>4h</option><option>1d</option></select></label>
    <button id="loadBtn">불러오기</button><span class="status" id="status">대기 중</span>
  </div>
  <div class="toolbar">
    <button class="tool" data-tool="line">라인</button>
    <button class="tool" data-tool="box">박스</button>
    <button class="tool" data-tool="clear">지우기</button>
    <span class="small">· 지표:
      <label><input type="checkbox" id="sma" checked>SMA20</label>
      <label><input type="checkbox" id="ema" checked>EMA50</label>
      <label><input type="checkbox" id="rsi" checked>RSI14</label>
      <label><input type="checkbox" id="vwap" checked>VWAP</label>
      <label><input type="checkbox" id="atr" checked>ATR14</label>
      <label><input type="checkbox" id="stoch" checked>Stoch(14,3)</label>
      <label><input type="checkbox" id="ob" checked>OB 박스</label>
    </span>
  </div>
  <div class="chart-wrap"><div id="chart"></div><canvas id="overlay"></canvas></div>
  <div class="small">※ 퍼블릭 Binance REST/WS 엔드포인트 사용 · 학습/연습용</div>
</div></main>
<footer>© ChartoryTech</footer>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./scripts/auth.js"></script>
<script src="./scripts/chart.js"></script>
<script>
requireAuth().catch(()=>location.href="login.html");
document.getElementById('logoutBtn').addEventListener('click', async (e)=>{e.preventDefault(); await logout(); location.href="login.html";});
</script>
</body></html>
